<div class="container">
  <div class="header-card">
    <h1>{{ title() }}</h1>
    <p class="subtitle">Convert text to speech using AI providers</p>
  </div>

  <!-- Settings Configuration -->
  <div class="card">
    <h2>üîß TTS Settings</h2>
    
    <div class="settings-grid">
      <div class="form-group">
        <label for="provider">Provider:</label>
        <select 
          id="provider" 
          [(ngModel)]="selectedProvider" 
          (change)="onProviderChange()"
          class="form-control">
          @for (provider of providers; track provider) {
            <option [value]="provider">{{ provider | titlecase }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <label for="model">Model:</label>
        <select 
          id="model" 
          [(ngModel)]="selectedModel" 
          class="form-control">
          @for (model of models(); track model) {
            <option [value]="model">{{ model }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <label for="voice">Voice:</label>
        <select 
          id="voice" 
          [(ngModel)]="selectedVoice" 
          class="form-control">
          @for (voice of voices; track voice) {
            <option [value]="voice">{{ voice | titlecase }}</option>
          }
        </select>
      </div>

      <div class="form-group full-width">
        <label for="apiKey">API Key:</label>
        <input 
          type="password" 
          id="apiKey" 
          [(ngModel)]="apiKey" 
          placeholder="Enter your API key"
          class="form-control">
      </div>
    </div>
  </div>

  <!-- Text Input -->
  <div class="card">
    <h2>üìù Text Input</h2>
    
    <div class="form-group">
      <label for="textInput">Text to convert to speech:</label>
      <textarea 
        id="textInput"
        [(ngModel)]="inputText"
        rows="4"
        placeholder="Enter the text you want to convert to speech..."
        class="form-control textarea"
        [disabled]="isProcessing()">
      </textarea>
    </div>

    <div class="character-count">
      Characters: {{ inputText().length }} / 4000
    </div>
  </div>

  <!-- Generation Controls -->
  <div class="card">
    <h2>üéµ Generate Speech</h2>
    
    <div class="generation-controls">
      <button 
        class="btn btn-primary"
        (click)="generateSpeech()"
        [disabled]="!canGenerate()">
        @if (isProcessing()) {
          <span class="spinner"></span> Generating...
        } @else {
          üé§ Generate Speech
        }
      </button>

      @if (currentResult() && currentResult()?.status === 'completed') {
        <button class="btn btn-success" (click)="playAudio()">
          ‚ñ∂Ô∏è Play Audio
        </button>
        
        <button class="btn btn-info" (click)="downloadAudio()">
          üíæ Download MP3
        </button>
      }

      @if (currentResult()) {
        <button class="btn btn-secondary" (click)="clearResult()">
          üóëÔ∏è Clear
        </button>
      }
    </div>

    <!-- Status Display -->
    @if (statusMessage()) {
      <div class="status-message" 
           [class.error]="currentResult()?.status === 'failed'"
           [class.success]="currentResult()?.status === 'completed'"
           [class.processing]="isProcessing()">
        {{ statusMessage() }}
      </div>
    }

    @if (errorMessage()) {
      <div class="error-message">
        ‚ö†Ô∏è {{ errorMessage() }}
      </div>
    }

    <!-- Audio Info -->
    @if (currentResult()?.status === 'completed') {
      <div class="audio-info">
        <div class="info-grid">
          @if (currentResult()?.duration) {
            <div class="info-item">
              <strong>Duration:</strong> {{ currentResult()?.duration }}s
            </div>
          }
          @if (currentResult()?.fileSize) {
            <div class="info-item">
              <strong>File Size:</strong> {{ (currentResult()?.fileSize! / 1024) | number:'1.1-1' }}KB
            </div>
          }
          @if (currentResult()?.processingTime) {
            <div class="info-item">
              <strong>Processing Time:</strong> {{ currentResult()?.processingTime }}ms
            </div>
          }
        </div>
      </div>
    }
  </div>

  <!-- Architecture Info -->
  <div class="card">
    <h2>üèóÔ∏è Onion Architecture Implementation</h2>
    <div class="architecture-info">
      <p>This TTS application demonstrates Onion Architecture with Angular 20:</p>
      <ol class="layers-list">
        <li><strong>Domain</strong> - TTS entities, value objects, and business rules</li>
        <li><strong>Enactment</strong> - TTS application services and use cases</li>
        <li><strong>Infrastructure</strong> - In-memory repositories and local storage</li>
        <li><strong>Integration</strong> - Angular service adapters</li>
        <li><strong>Presentation</strong> - This UI component with Angular 20 signals</li>
        <li><strong>Common</strong> - Shared utilities and result patterns</li>
      </ol>
    </div>
  </div>
</div>
